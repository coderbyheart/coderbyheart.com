{"componentChunkName":"component---src-page-post-tsx","path":"/npm7-and-aws-sdk-v3","result":{"data":{"site":{"siteMetadata":{"title":"Markus Tacker","tagLine":"Software Crafter","description":"Software Crafter building üå©Ô∏è cloud-based cellular IoT solutions at Nordic Semiconductor.‚Äã\n\t\tMentor. Speaker. ‚ÄãConference & Community builder. Camper. üèïÔ∏è üöê","gitHubUrl":"https://github.com/coderbyheart/coderbyheart.com.git","siteUrl":"https://coderbyheart.com","twitter":"@coderbyheart","defaultCard":"https://images.ctfassets.net/bncv3c2gt878/3Jk4P6nFPNzaz1gsguktk8/350b7e4ddb2c7d86416243d9902920e2/social-card-default-2020.png"}}},"pageContext":{"page":{"id":"4bd0fe57-ba29-5cb6-b10f-8709d8b6cc56","name":"npm7-and-aws-sdk-v3","relativeDirectory":"post","relativePath":"post/npm7-and-aws-sdk-v3.md","remark":{"htmlAst":{"children":[{"children":[{"children":[],"type":"text","value":"In my previous post "},{"children":[{"children":[],"type":"text","value":"I looked into the new AWS SDK v3"}],"tagName":"a","properties":{"href":"./aws-sdk-v3"},"type":"element"},{"children":[],"type":"text","value":", which\nturned out to provide good improvements over version 2 that justify an upgrade."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"The upgrade is relatively straight forward: the same type of change needs to be\napplied to all clients and this can be done safely and quickly. Only a few\nchanges required more than simply replacing some API calls."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"This week I decided to migrate a bigger codebase to NPM version 7, which is now\n"},{"children":[{"children":[],"type":"text","value":"general available"}],"tagName":"a","properties":{"href":"https://github.blog/2021-02-02-npm-7-is-now-generally-available/","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":".\nHowever this surfaced an issue in AWS SDK v3 that leads to lambdas becoming\nunnecessary large, when the AWS SDK v3 clients are installed with NPM v7."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"properties":{"src":"//images.ctfassets.net/bncv3c2gt878/47OH5fyozGFbDHZT9WChrg/7332c3d9fde0705ba44eb8baeb70fb19/42051140850_483af349da_o_d.jpg?w=5344&h=3006","alt":"MSC Preziosa polluting the air at Geirangerfjord"},"children":[],"tagName":"img","type":"element"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"On a high level,\n"},{"children":[{"children":[],"type":"text","value":"the way I package lambdas"}],"tagName":"a","properties":{"href":"./how-i-package-typescript-lambdas-for-aws"},"type":"element"},{"children":[],"type":"text","value":" runs\n"},{"children":[{"children":[],"type":"text","value":"npm ci --only=prod"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":", which with NPM v6 results in a "},{"children":[{"children":[],"type":"text","value":"node_modules"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":" folder for\nthis project I am working on of around 120 MB of dependencies. With NPM v7 on\nthe other hand I suddenly was seeing folder sizes of around 380 MB, which after\nzipping was too large for AWS lambda:\n"},{"children":[{"children":[],"type":"text","value":"deployment packages after unzipping can only be 250 MB"}],"tagName":"a","properties":{"href":"https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":"."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"When trying to deploy the solution this leads to CloudFormation errors like this\none:"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"7/88 | 5:33:19 PM | CREATE_FAILED | AWS::Lambda::LayerVersion |\ncat-tracker-Linux-fbfce639-layer (cattrackerLinuxfbfce639layerDD08A9A6)\nUnzipped size must be smaller than 262144000 bytes (Service:\nAWSLambdaInternal; Status Code: 400; Error Code:\nInvalidParameterValueException; Request ID:\n839fc0c0-bc5e-4e4a-9cbb-df8fa8b2d3ba)"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"}],"tagName":"blockquote","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"The issue has been reported in multiple variants\n("},{"children":[{"children":[],"type":"text","value":"#1536: Trim production dependencies"}],"tagName":"a","properties":{"href":"https://github.com/aws/aws-sdk-js-v3/issues/1536","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":",\n"},{"children":[{"children":[],"type":"text","value":"#2051: middleware-retry includes react-native"}],"tagName":"a","properties":{"href":"https://github.com/aws/aws-sdk-js-v3/issues/2051","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":")\non the AWS SDK v3 GitHub project, but a fix has not been released, yet."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"After going a bit back and forth over different solutions, I managed to get the\nlambda layer down to an acceptable size: 28.2 MB zipped / 196 MB unzipped size\nfor the main application lambda layer, which includes these dependencies:"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[{"children":[{"children":[],"type":"text","value":"{"}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n  "},{"children":[{"children":[],"type":"text","value":"\"dependencies\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"{"}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-apigatewayv2\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-cloudformation\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-cloudwatch-logs\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-codepipeline\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-dynamodb\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-iot\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-s3\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-sqs\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-ssm\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-sts\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-timestream-query\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@aws-sdk/client-timestream-write\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.8.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@nordicsemiconductor/cell-geolocation-helpers\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.0.1\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@nordicsemiconductor/cloudformation-helpers\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"6.0.9\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@nordicsemiconductor/e2e-bdd-test-runner\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"12.1.8\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@nordicsemiconductor/random-words\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"5.0.0\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@nordicsemiconductor/timestream-helpers\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"3.1.1\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"@sinclair/typebox\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"0.12.9\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"ajv\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"7.1.1\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"fp-ts\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"2.9.5\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[{"children":[],"type":"text","value":","}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n    "},{"children":[{"children":[],"type":"text","value":"\"uuid\""}],"tagName":"span","properties":{"className":["token","property"]},"type":"element"},{"children":[{"children":[],"type":"text","value":":"}],"tagName":"span","properties":{"className":["token","operator"]},"type":"element"},{"children":[],"type":"text","value":" "},{"children":[{"children":[],"type":"text","value":"\"8.3.2\""}],"tagName":"span","properties":{"className":["token","string"]},"type":"element"},{"children":[],"type":"text","value":"\n  "},{"children":[{"children":[],"type":"text","value":"}"}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"}"}],"tagName":"span","properties":{"className":["token","punctuation"]},"type":"element"}],"tagName":"code","properties":{"className":["language-json"]},"type":"element"}],"tagName":"pre","properties":{"className":["language-json"]},"type":"element"}],"tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"json"},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"The install command used here is"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[{"children":[],"type":"text","value":"npm i --ignore-scripts --only=prod --no-audit --legacy-peer-deps"}],"tagName":"code","properties":{"className":["language-text"]},"type":"element"}],"tagName":"pre","properties":{"className":["language-text"]},"type":"element"}],"tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"--ignore-scripts"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":", "},{"children":[{"children":[],"type":"text","value":"--only=prod"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":", and "},{"children":[{"children":[],"type":"text","value":"--no-audit"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":" are expected for bundling\nproduction dependencies."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"The two important parameters to "},{"children":[{"children":[],"type":"text","value":"npm"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":" are:"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"i"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":" instead of "},{"children":[{"children":[{"children":[],"type":"text","value":"ci"}],"tagName":"code","properties":{},"type":"element"}],"tagName":"a","properties":{"href":"https://docs.npmjs.com/cli/v7/commands/npm-ci","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":":\notherwise NPM v7 will, when used with the projects package-lock.json which\ncontains many other development dependencies, install all dependencies, not\njust the production dependencies"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"--legacy-peer-deps"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":": not many packages have yet migrated to NPM v7's new\nbehaviour to\n"},{"children":[{"children":[],"type":"text","value":"automatically resolve and install peerDependencies"}],"tagName":"a","properties":{"href":"https://github.blog/2021-02-02-npm-7-is-now-generally-available/#peer-dependencies","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":"."}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"}],"tagName":"ol","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"For smaller projects without AWS SDK v3 dependencies you can keep using\n"},{"children":[{"children":[],"type":"text","value":"npm ci"}],"tagName":"code","properties":{},"type":"element"},{"children":[],"type":"text","value":",\n"},{"children":[{"children":[],"type":"text","value":"as the example in my lambda packager shows"}],"tagName":"a","properties":{"href":"https://github.com/NordicSemiconductor/cloud-aws-package-layered-lambdas-js/blob/abcb44867334cbbbd78297a9a8ab90638dcc47c4/cdk/prepareResources.ts#L39-L73","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":",\nwhich speeds up the installation process significantly."}],"tagName":"p","properties":{},"type":"element"}],"type":"root","data":{"quirksMode":false}},"frontmatter":{"title":"Handling NPM v7's unnecessary inclusion of peer dependencies with AWS SDK v3","subtitle":"Cloud Native","noheadline":null,"date":"2021-03-07T16:00:00.000Z","abstract":"When using NPM v7 to package lambdas using AWS SKD v3 it leads to unnecessary large deployment pacakges.","lang":null},"headings":[]}},"Footer":{"id":"cfe5b9e2-511c-5615-992a-dab82e1f8ed7","name":"Footer","relativeDirectory":"","relativePath":"Footer.md","remark":{"htmlAst":{"children":[{"children":[{"children":[],"type":"text","value":"Software Crafter building üå©Ô∏è cloud-based cellular IoT solutions at\n"},{"children":[{"children":[],"type":"text","value":"Nordic Semiconductor"}],"tagName":"a","properties":{"href":"https://nordicsemi.com/","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"},{"children":[],"type":"text","value":"."},{"children":[],"tagName":"br","properties":{},"type":"element"},{"children":[],"type":"text","value":"\nMentor. Speaker. Conference & Community builder. Camper. üèïÔ∏è üöê"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[{"children":[],"tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"type":"element"}],"tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"type":"element"}],"tagName":"a","properties":{"href":"#markus-tacker","ariaLabel":"markus tacker permalink","className":["anchor","before"]},"type":"element"},{"children":[],"type":"text","value":"Markus Tacker"}],"tagName":"h2","properties":{"id":"markus-tacker","style":"position:relative;"},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"Media Computer Scientist (B.Sc.)"}],"tagName":"strong","properties":{},"type":"element"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"üì® "},{"children":[{"children":[],"type":"text","value":"m@coderbyheart.com"}],"tagName":"a","properties":{"href":"mailto:m@coderbyheart.com","target":"_blank","rel":["nofollow","noreferrer"]},"type":"element"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"}],"tagName":"ul","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[{"children":[],"tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"type":"element"}],"tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"type":"element"}],"tagName":"a","properties":{"href":"#connect","ariaLabel":"connect permalink","className":["anchor","before"]},"type":"element"},{"children":[],"type":"text","value":"Connect"}],"tagName":"h2","properties":{"id":"connect","style":"position:relative;"},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"You can find me on these sites."}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"Please note that I will reject connection requests from people I've never met\npersonally."}],"tagName":"em","properties":{},"type":"element"}],"tagName":"p","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"Mastodon"}],"tagName":"a","properties":{"rel":["me"],"href":"https://chaos.social/@coderbyheart","title":"Markus Tacker on Mastodon"},"type":"element"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"Matrix"}],"tagName":"a","properties":{"rel":["me"],"href":"https://matrix.to/#/@coderbyheart:matrix.im","title":"Markus Tacker on Matrix"},"type":"element"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"LinkedIn"}],"tagName":"a","properties":{"rel":["me"],"href":"https://www.linkedin.com/in/markustacker","title":"Markus Tacker on LinkedIn"},"type":"element"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"GitHub"}],"tagName":"a","properties":{"rel":["me"],"href":"https://github.com/coderbyheart","title":"Markus Tacker on GitHub"},"type":"element"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"},{"children":[{"children":[{"children":[],"type":"text","value":"Instagram"}],"tagName":"a","properties":{"rel":["me"],"href":"https://www.instagram.com/coderbyheart/","title":"Markus Tacker on Instagram"},"type":"element"}],"tagName":"li","properties":{},"type":"element"},{"children":[],"type":"text","value":"\n"}],"tagName":"ul","properties":{},"type":"element"}],"type":"root","data":{"quirksMode":false}},"frontmatter":{"title":"","subtitle":null,"noheadline":null,"date":null,"abstract":null,"lang":null},"headings":[{"id":"markus-tacker","depth":2,"value":"Markus Tacker"},{"id":"connect","depth":2,"value":"Connect"}]}},"pagePath":"/npm7-and-aws-sdk-v3"}},"staticQueryHashes":[]}